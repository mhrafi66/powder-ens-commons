<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FRS Dataset | POWDER-ENS Commons</title>
  <style>
    body { max-width: 900px; margin: auto; font-family: sans-serif; line-height: 1.6; padding: 20px; }
    h1, h2, h3 { color: #2c3e50; }
    pre { background: #f4f4f4; padding: 10px; overflow-x: auto; border-left: 4px solid #007acc; }
    code { background: #f9f9f9; padding: 2px 4px; font-family: monospace; }
    table { border-collapse: collapse; width: 100%; margin: 10px 0; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background-color: #f2f2f2; }
    details summary { cursor: pointer; font-weight: bold; margin-top: 10px; }
    details { margin-bottom: 15px; }
    hr { margin: 30px 0; }
    a { color: #007acc; }
  </style>
</head>
<body>

<h1>📡 FRS Dataset</h1>
<p>This dataset contains large-scale RSS measurements collected from single- and two-transmitter experiments using the POWDER Testbed at the University of Utah.</p>

<hr>

<h2>📦 Installation and Usage</h2>
<p>Install the <code>powder_ens_commons</code> package from PyPI:</p>

<pre><code>pip install powder_ens_commons</code></pre>

<p>Once installed, load the dataset as follows:</p>

<pre><code>from powder_ens_commons.datacommons import load_dataset

# Load the 'single_tx' version of FRS dataset
dataset, receivers, building_map, dsm_map = load_dataset("frs", version="single_tx")
</code></pre>

<hr>

<h2>▶️ Available Dataset Parameters</h2>
<p><code>load_dataset()</code> supports:</p>

<ul>
  <li><strong>dataset_name</strong>: "frs"</li>
  <li><strong>version</strong>:
    <ul>
      <li>"full", "single_tx", "two_tx", "random", "grid"</li>
      <li>"indoor", "off_campus", "stationary0/1/2"</li>
      <li>"april", "july", "november", "walking", "cycling", "driving"</li>
    </ul>
  </li>
</ul>

<hr>

<h2>🗺️ Reading DSM & Building Maps in Python</h2>

<details>
  <summary>📂 Open .tif files</summary>
  <pre><code># pip install rasterio
import rasterio
with rasterio.open(building_map) as src:
    print(src.count, src.width, src.height)
</code></pre>
</details>

<details>
  <summary>🖼️ Visualize Building Map</summary>
  <pre><code>import matplotlib.pyplot as plt
import rasterio

with rasterio.open(building_map) as src:
    data = src.read(1)

plt.imshow(data, cmap='gray')
plt.title("Building Map")
plt.colorbar(label="Height (m)")
plt.show()
</code></pre>
</details>

<details>
  <summary>🗺️ Visualize DSM Map</summary>
  <pre><code>with rasterio.open(dsm_map) as src:
    data = src.read(1)

plt.imshow(data, cmap='terrain')
plt.title("DSM Map")
plt.colorbar(label="Elevation (m)")
plt.show()
</code></pre>
</details>

<hr>

<h2>📊 Dataset Description</h2>

<ul>
  <li><strong>Total Samples:</strong> 5,214</li>
  <li><strong>Unique TX Locations:</strong> 5,514</li>
  <li><strong>Receiver Count per Sample:</strong> 10–25</li>
</ul>

<h3>Sample Distribution</h3>
<table>
  <tr><th>Sample Type</th><th>Count</th><th>Receiver Count</th></tr>
  <tr><td>No Transmitters</td><td>46</td><td>10–25</td></tr>
  <tr><td>1 Transmitter</td><td>4,822</td><td>10–25</td></tr>
  <tr><td>2 Transmitters</td><td>346</td><td>11–12</td></tr>
</table>

<p>Transmitters: <em>Baofeng BF-F8HP (FRS/GMRS @ 462.7 MHz, 1W)</em></p>

<pre><code>RSS = (10 / N) * log10(Σ x_i²)</code></pre>

<h3>Measurement Parameters</h3>
<table>
  <tr><th>Parameter</th><th>Value</th></tr>
  <tr><td>Frequency</td><td>462.7 MHz</td></tr>
  <tr><td>Radio Gain</td><td>35 dB</td></tr>
  <tr><td>Sample Rate</td><td>2 MHz</td></tr>
  <tr><td>Sample Length (N)</td><td>10,000</td></tr>
  <tr><td>Bandpass Filter</td><td>6 kHz</td></tr>
  <tr><td>Transmitters</td><td>0–2</td></tr>
  <tr><td>Tx Power</td><td>1 W</td></tr>
</table>

<h3>Receiver Types</h3>
<p>Ettus USRP X310 / B210 (uncalibrated). Fixed & mobile (e.g., on campus shuttles).</p>

<hr>

<h2>🗂️ Folder Structure</h2>

<pre><code>dataset/
├── Full_Dataset/
│   └── powder_462.7_rss_data.json
├── Separated_Dataset_CSV/
│   ├── single_tx.csv
│   ├── two_tx.csv
│   └── location_coordinates.json
├── Separated_Dataset_JSON/
│   ├── all_data/
│   ├── train_test_splits/
│   ├── seasonal_split/
│   ├── special_test_cases/
│   └── transportation_split/
├── Maps/
│   ├── dsm.tif
│   ├── corrected_dsm.tif
│   └── corrected_buildings.tif
├── location_indexes.json
└── README.md
</code></pre>

<hr>

<h2>🧪 JSON Sample Format</h2>

<pre><code>{
  "2022-04-25 14:11:02": {
    "rx_data": [
      [-75.14, 40.76, -111.85, "bus-4603"],
      ...
    ],
    "tx_coords": [
      [40.767, -111.846], [40.769, -111.846]
    ],
    "metadata": [
      {"power": 1, "transport": "walking", "radio": "TXA"},
      {"power": 1, "transport": "driving", "radio": "TXB"}
    ]
  }
}
</code></pre>

<h3>Python JSON Loader</h3>
<pre><code>import json
with open('powder_462.7_rss_data.json') as f:
    data = json.load(f)
</code></pre>

<hr>

<h2>🗺️ DSM Map & Metadata</h2>

<p>Includes State of Utah 2013–2014 LiDAR DSM of UofU campus, containing buildings and vegetation.</p>

<pre><code>import rasterio as rio
import numpy as np
import utm

dsm_object = rio.open('dsm.tif')
dsm_map = dsm_object.read(1)
dsm_resolution = dsm_object.res
dsm_transform = dsm_object.transform
utm_transform = np.array(dsm_transform).reshape((3,3))[:2]
utm_top_left = utm_transform @ np.array([0,0,1])
utm_bottom_right = utm_transform @ np.array([dsm_object.shape[0], dsm_object.shape[1], 1])
latlon_top_left = utm.to_latlon(utm_top_left[0], utm_top_left[1], 12, 'T')
latlon_bottom_right = utm.to_latlon(utm_bottom_right[0], utm_bottom_right[1], 12, 'T')
</code></pre>

<p><strong>DSM DOI:</strong> <a href="https://doi.org/10.5069/G9TH8JNQ" target="_blank">https://doi.org/10.5069/G9TH8JNQ</a></p>

<hr>

<p><a href="index.html">← Back to main page</a></p>

</body>
</html>
